<?xml version="1.0" encoding="utf-8"?>
<Page x:Class="LechYTDLP.Views.DownloadsPage"
      xmlns:components="using:LechYTDLP.Components"
      xmlns:services="using:LechYTDLP.Services"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:LechYTDLP.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:controls="using:Microsoft.UI.Xaml.Controls"
      xmlns:ui="using:CommunityToolkit.WinUI"
      mc:Ignorable="d">

    <Page.Resources>
        <!--  These styles can be referenced to create a consistent SettingsPage layout  -->
        <!--  Spacing between cards  -->
        <x:Double x:Key="SettingsCardSpacing">4</x:Double>
    </Page.Resources>

    <ScrollViewer>
        <Grid>
            <StackPanel MaxWidth="1000"
                        HorizontalAlignment="Stretch"
                        Spacing="{StaticResource SettingsCardSpacing}"
                        Margin="36,40"
                        Orientation="Vertical">

                <StackPanel.ChildrenTransitions>
                    <EntranceThemeTransition FromVerticalOffset="50" />
                    <RepositionThemeTransition IsStaggeringEnabled="False" />
                </StackPanel.ChildrenTransitions>

                <TextBlock Text="Downloads"
                           Style="{StaticResource TitleLargeTextBlockStyle}"
                           Margin="0,0,0,24" />

                <!--No Queue Container-->
                <Button x:Name="NoQueueContainer"
                        Click="OnClick"
                        Background="{ThemeResource SmokeFillColorDefaultBrush}"
                        CornerRadius="{ThemeResource OverlayCornerRadius}"
                        HorizontalAlignment="Stretch"
                        Padding="16"
                        Visibility="Visible">
                    <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}"
                               Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                               Text="There is no downloads on queue, hop to search to gather some videos."
                               TextAlignment="Center"
                               TextWrapping="Wrap" />
                </Button>

                <!--Current Media Section-->
                <Button x:Name="CurrentMediaContainer"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="{ThemeResource OverlayCornerRadius}"
                        Visibility="Collapsed"
                        Click="OnClick"
                        VerticalAlignment="Stretch"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch"
                        Padding="16">
                    <Grid ColumnSpacing="12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>
                        <!--<Grid.ContextFlyout>
                            <MenuFlyout>
                                <MenuFlyoutItem Text="Download again"
                                                Click="OnClick"
                                                Icon="{ui:FontIcon Glyph=&#xE896;}"
                                                Name="DownloadAgain" />
                                <MenuFlyoutSubItem Text="Copy"
                                                   Icon="{ui:FontIcon Glyph=&#xE8C8;}">
                                    <MenuFlyoutItem Text="Copy title"
                                                    Click="OnClick"
                                                    Icon="{ui:FontIcon Glyph=&#xE8D2;}"
                                                    Name="CopyTitle" />
                                    <MenuFlyoutItem Text="Copy link"
                                                    Click="OnClick"
                                                    Icon="{ui:FontIcon Glyph=&#xE71B;}"
                                                    Name="CopyLink" />
                                </MenuFlyoutSubItem>
                                <MenuFlyoutItem Text="Delete"
                                                Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                                                Click="OnClick"
                                                Icon="{ui:FontIcon Glyph=&#xE74D;}"
                                                Name="Delete" />
                            </MenuFlyout>
                        </Grid.ContextFlyout>-->

                        <Border CornerRadius="{StaticResource ControlCornerRadius}"
                                Height="100"
                                Width="177"
                                MaxWidth="180"
                                MinWidth="170"
                                Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}">
                            <Image x:Name="CurrentThumbnailImage"
                                   Height="100"
                                   Width="177"
                                   MaxWidth="180"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   MinWidth="100"
                                   Stretch="UniformToFill" />
                        </Border>

                        <Grid Grid.Column="1"
                              RowSpacing="2"
                              HorizontalAlignment="Stretch">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0"
                                       x:Name="CurrentVideoTitle"
                                       Style="{ThemeResource SubtitleTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorPrimary}"
                                       Text="Video Name"
                                       TextWrapping="NoWrap" />

                            <RichTextBlock Grid.Row="1"
                                           x:Name="CurrentVideoUploaderAndSavingTo"
                                           Style="{ThemeResource BodyRichTextBlockStyle}"
                                           TextWrapping="NoWrap" />

                            <Grid Grid.Row="2"
                                  Margin="0,0,0,4"
                                  VerticalAlignment="Bottom"
                                  HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0"
                                           x:Name="CurrentVideoStatus"
                                           Text="Queued"
                                           Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                                           Style="{ThemeResource CaptionTextBlockStyle}"
                                           VerticalAlignment="Bottom"
                                           TextWrapping="NoWrap" />

                                <Button Grid.Row="1"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Style="{StaticResource AccentButtonStyle}"
                                        IsEnabled="False"
                                        x:Name="PauseOrResumeButton"
                                        Click="OnClick">
                                    <SymbolIcon Symbol="Pause" />
                                </Button>
                            </Grid>

                            <ProgressBar x:Name="CurrentVideoProgress"
                                         Visibility="Visible"
                                         VerticalAlignment="Bottom"
                                         HorizontalAlignment="Stretch"
                                         Grid.Row="3" />
                        </Grid>
                    </Grid>
                </Button>

                <!--In Queue Section-->
                <TextBlock Text="In queue"
                           Style="{StaticResource TitleTextBlockStyle}"
                           Visibility="Collapsed"
                           x:Name="QueueTitleText"
                           Margin="0,24,0,0" />

                <ListView SelectionMode="None"
                          x:Name="QueueListView"
                          HorizontalContentAlignment="Stretch"
                          Margin="0,6,0,0">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="services:DownloadItem">
                            <Grid>
                                <!--<Grid.ContextFlyout>
                                <MenuFlyout>
                                    <MenuFlyoutItem Text="Download again"
                                                    Click="OnClick"
                                                    Icon="{ui:FontIcon Glyph=&#xE896;}"
                                                    Name="DownloadAgain" />
                                    <MenuFlyoutItem Text="Open in explorer"
                                                    Click="OnClick"
                                                    Icon="{ui:FontIcon Glyph=&#xEC50;}"
                                                    Name="OpenInExplorer" />
                                    <MenuFlyoutSubItem Text="Copy"
                                                       Icon="{ui:FontIcon Glyph=&#xE8C8;}">
                                        <MenuFlyoutItem Text="Copy title"
                                                        Click="OnClick"
                                                        Icon="{ui:FontIcon Glyph=&#xE8D2;}"
                                                        Name="CopyTitle" />
                                        <MenuFlyoutItem Text="Copy link"
                                                        Click="OnClick"
                                                        Icon="{ui:FontIcon Glyph=&#xE71B;}"
                                                        Name="CopyLink" />
                                        <MenuFlyoutItem Text="Copy file path"
                                                        Click="OnClick"
                                                        Icon="{ui:FontIcon Glyph=&#xE8B7;}"
                                                        Name="CopyFilepath" />
                                    </MenuFlyoutSubItem>
                                    <MenuFlyoutItem Text="Delete"
                                                    Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                                                    Click="OnClick"
                                                    Icon="{ui:FontIcon Glyph=&#xE74D;}"
                                                    Name="Delete" />
                                </MenuFlyout>
                            </Grid.ContextFlyout>-->
                                <components:MediaItem Item="{x:Bind}"
                                                      HorizontalAlignment="Stretch" />
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment"
                                    Value="Stretch" />
                            <Setter Property="Padding"
                                    Value="0" />
                            <Setter Property="Margin"
                                    Value="0,6,0,6" />
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>

                <!--History Section-->
                <Grid Margin="0,6,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="History"
                               Style="{StaticResource TitleTextBlockStyle}"
                               Visibility="Collapsed"
                               x:Name="HistoryTitleText"
                               Grid.Column="0" />
                    <Button Grid.Column="1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource SubtleButtonStyle}"
                            IsEnabled="False"
                            x:Name="ClearHistoryButton"
                            Click="OnClick">
                        Clear
                    </Button>
                </Grid>

                <ProgressBar x:Name="HistoryProgressBar"
                             Visibility="Collapsed"
                             IsIndeterminate="True"
                             VerticalAlignment="Bottom"
                             HorizontalAlignment="Stretch"
                             Margin="0,6,0,6" />

                <ListView SelectionMode="None"
                          x:Name="HistoryListView"
                          HorizontalContentAlignment="Stretch"
                          Margin="0,6,0,0">
                    <ListView.ItemTemplate>
                        <DataTemplate x:DataType="services:DownloadItem">
                            <Grid>
                                <Grid.ContextFlyout>
                                    <MenuFlyout>
                                        <MenuFlyoutItem Text="Download again"
                                                        Click="OnClick"
                                                        Icon="{ui:FontIcon Glyph=&#xE896;}"
                                                        Name="DownloadAgain" />
                                        <MenuFlyoutItem Text="Open in explorer"
                                                        Click="OnClick"
                                                        Icon="{ui:FontIcon Glyph=&#xEC50;}"
                                                        Name="OpenInExplorer" />
                                        <MenuFlyoutSubItem Text="Copy"
                                                           Icon="{ui:FontIcon Glyph=&#xE8C8;}">
                                            <MenuFlyoutItem Text="Copy title"
                                                            Click="OnClick"
                                                            Icon="{ui:FontIcon Glyph=&#xE8D2;}"
                                                            Name="CopyTitle" />
                                            <MenuFlyoutItem Text="Copy link"
                                                            Click="OnClick"
                                                            Icon="{ui:FontIcon Glyph=&#xE71B;}"
                                                            Name="CopyLink" />
                                            <MenuFlyoutItem Text="Copy file path"
                                                            Click="OnClick"
                                                            Icon="{ui:FontIcon Glyph=&#xE8B7;}"
                                                            Name="CopyFilepath" />
                                        </MenuFlyoutSubItem>
                                        <MenuFlyoutItem Text="Delete"
                                                        Foreground="{ThemeResource SystemFillColorCriticalBrush}"
                                                        Click="OnClick"
                                                        Icon="{ui:FontIcon Glyph=&#xE74D;}"
                                                        Name="Delete" />
                                    </MenuFlyout>
                                </Grid.ContextFlyout>
                                <components:MediaItem Item="{x:Bind}"
                                                      HorizontalAlignment="Stretch" />
                            </Grid>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment"
                                    Value="Stretch" />
                            <Setter Property="Padding"
                                    Value="0" />
                            <Setter Property="Margin"
                                    Value="0,6,0,6" />
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>
            </StackPanel>
        </Grid>
    </ScrollViewer>

    <!--<Grid x:Name="HistoryContainer">
            <TextBlock Text="Downloads"
                       Style="{StaticResource TitleLargeTextBlockStyle}"
                       Margin="0,0,0,36" />
        </Grid>-->
</Page>
