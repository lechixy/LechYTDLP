<?xml version="1.0" encoding="utf-8"?>
<Page x:Class="LechYTDLP.Views.DownloadsPage"
      xmlns:components="using:LechYTDLP.Components"
      xmlns:services="using:LechYTDLP.Services"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:local="using:LechYTDLP.Views"
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
      xmlns:controls="using:Microsoft.UI.Xaml.Controls"
      mc:Ignorable="d">

    <Page.Resources>
        <!--  These styles can be referenced to create a consistent SettingsPage layout  -->
        <!--  Spacing between cards  -->
        <x:Double x:Key="SettingsCardSpacing">4</x:Double>

        <DataTemplate x:Key="MediaItemTemplate"
                      x:DataType="services:DownloadItem">
            <ItemContainer HorizontalAlignment="Stretch">
                <components:MediaItem Item="{x:Bind}"
                                      HorizontalAlignment="Stretch" />
            </ItemContainer>
        </DataTemplate>
    </Page.Resources>

    <ScrollViewer>
        <Grid>
            <StackPanel MaxWidth="1000"
                        HorizontalAlignment="Stretch"
                        Spacing="{StaticResource SettingsCardSpacing}"
                        Margin="36,40"
                        Orientation="Vertical">

                <StackPanel.ChildrenTransitions>
                    <EntranceThemeTransition FromVerticalOffset="50" />
                    <RepositionThemeTransition IsStaggeringEnabled="False" />
                </StackPanel.ChildrenTransitions>

                <TextBlock Text="Downloads"
                           Style="{StaticResource TitleLargeTextBlockStyle}"
                           Margin="0,0,0,24" />

                <Button x:Name="NoQueueContainer"
                        Click="HandleButton"
                        Background="{ThemeResource SmokeFillColorDefaultBrush}"
                        CornerRadius="{ThemeResource OverlayCornerRadius}"
                        HorizontalAlignment="Stretch"
                        Padding="16"
                        Visibility="Visible">
                    <TextBlock Style="{ThemeResource SubtitleTextBlockStyle}"
                               Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                               Text="There is no downloads on queue, hop to search to gather some videos."
                               TextAlignment="Center"
                               TextWrapping="Wrap" />
                </Button>

                <Button x:Name="CurrentMediaContainer"
                        Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                        CornerRadius="{ThemeResource OverlayCornerRadius}"
                        Visibility="Collapsed"
                        Click="HandleButton"
                        VerticalAlignment="Stretch"
                        HorizontalAlignment="Stretch"
                        HorizontalContentAlignment="Stretch"
                        Padding="16">
                    <Grid ColumnSpacing="12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                        </Grid.ColumnDefinitions>

                        <Border CornerRadius="{StaticResource ControlCornerRadius}"
                                Height="100"
                                Width="177"
                                MaxWidth="180"
                                MinWidth="170"
                                Background="{ThemeResource CardBackgroundFillColorSecondaryBrush}">
                            <Image x:Name="CurrentThumbnailImage"
                                   Height="100"
                                   Width="177"
                                   MaxWidth="180"
                                   HorizontalAlignment="Center"
                                   VerticalAlignment="Center"
                                   MinWidth="100"
                                   Stretch="UniformToFill" />
                        </Border>

                        <Grid Grid.Column="1"
                              RowSpacing="2" HorizontalAlignment="Stretch">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>

                            <TextBlock Grid.Row="0"
                                       x:Name="CurrentVideoTitle"
                                       Style="{ThemeResource SubtitleTextBlockStyle}"
                                       Foreground="{ThemeResource TextFillColorPrimary}"
                                       Text="Video Name"
                                       TextWrapping="NoWrap" />

                            <RichTextBlock Grid.Row="1"
                                           x:Name="CurrentVideoUploaderAndSavingTo"
                                           Style="{ThemeResource BodyRichTextBlockStyle}"
                                           TextWrapping="NoWrap" />

                            <Grid Grid.Row="2"
                                  Margin="0,0,0,4"
                                  VerticalAlignment="Bottom"
                                  HorizontalAlignment="Stretch">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>

                                <TextBlock Grid.Row="0"
                                           x:Name="CurrentVideoStatus"
                                           Text="Queued"
                                           Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                                           Style="{ThemeResource CaptionTextBlockStyle}"
                                           VerticalAlignment="Bottom"
                                           TextWrapping="NoWrap" />

                                <Button Grid.Row="1"
                                        HorizontalAlignment="Right"
                                        VerticalAlignment="Bottom"
                                        Style="{StaticResource AccentButtonStyle}"
                                        IsEnabled="False"
                                        x:Name="PauseOrResumeButton"
                                        Click="PauseOrResumeButton_Click">
                                    <SymbolIcon Symbol="Pause" />
                                </Button>
                            </Grid>

                            <ProgressBar x:Name="CurrentVideoProgress"
                                         Visibility="Visible"
                                         VerticalAlignment="Bottom"
                                         HorizontalAlignment="Stretch"
                                         Grid.Row="3" />
                        </Grid>
                    </Grid>
                </Button>

                <TextBlock Text="In queue"
                           Style="{StaticResource SubtitleTextBlockStyle}"
                           Visibility="Collapsed"
                           x:Name="QueueTitleText"
                           Margin="0,6,0,6" />

                <ListView ItemTemplate="{StaticResource MediaItemTemplate}"
                          SelectionMode="None"
                          x:Name="QueueListView"
                          HorizontalContentAlignment="Stretch"
                          Margin="0,6,0,0">
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment"
                                    Value="Stretch" />
                            <Setter Property="Padding"
                                    Value="0" />
                            <Setter Property="Margin"
                                    Value="0" />
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="Auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="History"
                               Style="{StaticResource SubtitleTextBlockStyle}"
                               Visibility="Collapsed"
                               x:Name="HistoryTitleText"
                               Grid.Column="0"
                               Margin="0,6,0,0" />
                    <Button Grid.Column="1"
                            HorizontalAlignment="Right"
                            VerticalAlignment="Center"
                            Style="{StaticResource AccentButtonStyle}"
                            IsEnabled="False"
                            x:Name="ClearHistoryButton"
                            Click="HandleButton">
                        Clear
                    </Button>
                </Grid>

                <ListView ItemTemplate="{StaticResource MediaItemTemplate}"
                          SelectionMode="None"
                          x:Name="HistoryListView"
                          HorizontalContentAlignment="Stretch"
                          Margin="0,12,0,0">
                    <ListView.ItemContainerStyle>
                        <Style TargetType="ListViewItem">
                            <Setter Property="HorizontalContentAlignment"
                                    Value="Stretch" />
                            <Setter Property="Padding"
                                    Value="0" />
                            <Setter Property="Margin"
                                    Value="0,6,0,6" />
                        </Style>
                    </ListView.ItemContainerStyle>
                </ListView>
            </StackPanel>
        </Grid>
    </ScrollViewer>

    <!--<Grid x:Name="HistoryContainer">
            <TextBlock Text="Downloads"
                       Style="{StaticResource TitleLargeTextBlockStyle}"
                       Margin="0,0,0,36" />
        </Grid>-->
</Page>
